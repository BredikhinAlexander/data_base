USE Shipping

SET TRANSACTION ISOLATION LEVEL REPEATABLE READ
--SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
BEGIN TRANSACTION

INSERT [TRIP] ([Ship_ID], [Date_departure], [Date_arrival], [Itinerary_ID], [Delivery_ID]) 
VALUES ( 8 , '23/07/2016 11:37:33', '01/08/2016 11:37:33' , 208 , 1 )

 
--возврат
DELETE TRIP
WHERE Ship_ID = 8 
AND Itinerary_ID = 208 
AND Date_departure = '23/07/2016 11:37:33'

COMMIT

SELECT @@TRANCOUNT